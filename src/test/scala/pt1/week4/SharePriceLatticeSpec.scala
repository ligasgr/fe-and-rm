package pt1.week4

import breeze.linalg.DenseMatrix
import common.MatrixMatchers
import org.scalatest.FunSuite

class SharePriceLatticeSpec extends FunSuite with MatrixMatchers {

  test("lattice is as expected") {
    val generatedPriceLattice = SharePriceLattice.generate(initialPrice = 100.0, termInYears = 0.25, volatility = 0.3,
      numberOfPeriods = 15, interestRate = 0.02, dividendYield = 0.01)
    assertMatricesEqual(
      generatedPriceLattice,
      DenseMatrix(
        (100.00, 96.20, 92.55, 89.03, 85.65, 82.39, 79.26, 76.25, 73.36, 70.57, 67.89, 65.31, 62.83, 60.44, 58.15, 55.94),
        (0.00, 103.95, 100.00, 96.20, 92.55, 89.03, 85.65, 82.39, 79.26, 76.25, 73.36, 70.57, 67.89, 65.31, 62.83, 60.44),
        (0.00, 0.00, 108.05, 103.95, 100.00, 96.20, 92.55, 89.03, 85.65, 82.39, 79.26, 76.25, 73.36, 70.57, 67.89, 65.31),
        (0.00, 0.00, 0.00, 112.32, 108.05, 103.95, 100.00, 96.20, 92.55, 89.03, 85.65, 82.39, 79.26, 76.25, 73.36, 70.57),
        (0.00, 0.00, 0.00, 0.00, 116.76, 112.32, 108.05, 103.95, 100.00, 96.20, 92.55, 89.03, 85.65, 82.39, 79.26, 76.25),
        (0.00, 0.00, 0.00, 0.00, 0.00, 121.37, 116.76, 112.32, 108.05, 103.95, 100.00, 96.20, 92.55, 89.03, 85.65, 82.39),
        (0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 126.16, 121.37, 116.76, 112.32, 108.05, 103.95, 100.00, 96.20, 92.55, 89.03),
        (0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 131.14, 126.16, 121.37, 116.76, 112.32, 108.05, 103.95, 100.00, 96.20),
        (0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 136.32, 131.14, 126.16, 121.37, 116.76, 112.32, 108.05, 103.95),
        (0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 141.70, 136.32, 131.14, 126.16, 121.37, 116.76, 112.32),
        (0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 147.30, 141.70, 136.32, 131.14, 126.16, 121.37),
        (0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 153.12, 147.30, 141.70, 136.32, 131.14),
        (0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 159.16, 153.12, 147.30, 141.70),
        (0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 165.45, 159.16, 153.12),
        (0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 171.98, 165.45),
        (0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 178.77)
      )
    )
  }
}
